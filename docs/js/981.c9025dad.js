"use strict";(self["webpackChunkcffinit"]=self["webpackChunkcffinit"]||[]).push([[981],{6e3:(e,i,t)=>{t.r(i),t.d(i,{default:()=>z});var n=t(3673);const o=(0,n.HX)("data-v-4aa16406");(0,n.dD)("data-v-4aa16406");const d={id:"metroline"},r={id:"form"},a=(0,n.Wm)("div",{id:"form-title"},[(0,n.Wm)("h1",{class:"page-title"}," Identifiers ")],-1),l={id:"form-content"},s={class:"scroll-to-bottom-container"},u=(0,n.Wm)("span",{class:"bottom"},null,-1),p=(0,n.Uk)(" Add identifier "),c={id:"form-button-bar"};(0,n.Cn)();const m=o(((e,i,t,m,v,f)=>{const w=(0,n.up)("Stepper"),g=(0,n.up)("IdentifierCardViewing"),b=(0,n.up)("IdentifierCardEditing"),y=(0,n.up)("q-btn"),I=(0,n.up)("StepperActions");return(0,n.wg)(),(0,n.j4)(n.HY,null,[(0,n.Wm)("div",d,[(0,n.Wm)(w)]),(0,n.Wm)("div",r,[a,(0,n.Wm)("div",l,[(0,n.Wm)("div",s,[u,(0,n.Wm)("div",null,[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.identifiers,((t,o)=>((0,n.wg)(),(0,n.j4)("div",{class:"q-mb-md q-mr-lg",key:o},[e.editingId!==o?((0,n.wg)(),(0,n.j4)(g,{key:0,index:o,identifier:t,onEditPressed:()=>e.editingId=o,onMoveDown:i=>e.moveDown(o,e.identifiers,e.setIdentifiers),onMoveUp:i=>e.moveUp(o,e.identifiers,e.setIdentifiers)},null,8,["index","identifier","onEditPressed","onMoveDown","onMoveUp"])):((0,n.wg)(),(0,n.j4)(b,(0,n.dG)({key:1,index:o},t,{onUpdateType:e.setIdentifierTypeField,onUpdateValue:e.setIdentifierValueField,onUpdateDescription:e.setIdentifierDescriptionField,onClosePressed:i[1]||(i[1]=()=>e.editingId=-1),onRemovePressed:e.removeIdentifier}),null,16,["index","onUpdateType","onUpdateValue","onUpdateDescription","onRemovePressed"]))])))),128))])]),(0,n.Wm)(y,{class:"q-mt-md q-mb-md",color:"primary","no-caps":"",onClick:e.addIdentifier},{default:o((()=>[p])),_:1},8,["onClick"])]),(0,n.Wm)("div",c,[(0,n.Wm)(I)])])],64)}));var v=t(1959),f=t(5264),w=t(5132);t(246);const g={class:"row items-center no-wrap"},b={class:"q-gutter-md items-center no-wrap"},y={class:"q-gutter-md items-center no-wrap"};function I(e,i,t,o,d,r){const a=(0,n.up)("q-option-group"),l=(0,n.up)("q-input"),s=(0,n.up)("q-card-section"),u=(0,n.up)("q-btn"),p=(0,n.up)("q-card-actions"),c=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(c,{flat:"",bordered:"",class:"bg-formcard"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)("div",g,[(0,n.Wm)(a,{inline:"",type:"radio","model-value":e.type,options:e.typeOptions,"onUpdate:modelValue":i[1]||(i[1]=i=>e.$emit("updateType","type",i))},null,8,["model-value","options"])]),(0,n.Wm)("div",b,[(0,n.Wm)(l,{"bg-color":"white",label:"Value",outlined:"",standout:"",dense:"","model-value":e.value,"onUpdate:modelValue":i[2]||(i[2]=i=>e.$emit("updateValue","value",i)),rules:[e.validateValue]},null,8,["model-value","rules"])]),(0,n.Wm)("div",y,[(0,n.Wm)(l,{"bg-color":"white",label:"Description",outlined:"",standout:"",dense:"","model-value":e.description,"onUpdate:modelValue":i[3]||(i[3]=i=>e.$emit("updateDescription","description",i)),rules:[e.validateDescription]},null,8,["model-value","rules"])])])),_:1}),(0,n.Wm)(p,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{color:"negative",dense:"",icon:"delete",label:"Remove",onClick:i[4]||(i[4]=i=>e.$emit("removePressed"))}),(0,n.Wm)(u,{dense:"",icon:"done",label:"Done",onClick:i[5]||(i[5]=i=>e.$emit("closePressed"))})])),_:1})])),_:1})}var W=t(3351);const C=(0,n.aZ)({name:"IdentifierCardEditing",props:{index:{type:Number,required:!0},type:{type:String,default:""},value:{type:String,default:""},description:{type:String,default:""}},setup(e){const i={doi:(0,W.rk)("/definitions/identifier/anyOf/0/properties/value"),url:(0,W.rk)("/definitions/identifier/anyOf/1/properties/value"),swh:(0,W.rk)("/definitions/identifier/anyOf/2/properties/value"),other:(0,W.rk)("/definitions/identifier/anyOf/3/properties/value")};return{validateValue:t=>i[e.type](t),validateDescription:(0,W.zN)("/definitions/identifier-description"),typeOptions:[{label:"DOI",value:"doi"},{label:"URL",value:"url"},{label:"Software Heritage",value:"swh"},{label:"Other",value:"other"}]}},emits:["closePressed","removePressed","updateType","updateValue","updateDescription"]});var h=t(151),k=t(5589),D=t(7011),q=t(4842),U=t(9367),V=t(8240),O=t(7518),Z=t.n(O);C.render=I;const x=C;Z()(C,"components",{QCard:h.Z,QCardSection:k.Z,QOptionGroup:D.Z,QInput:q.Z,QCardActions:U.Z,QBtn:V.Z});var P=t(2323);const j=(0,n.HX)("data-v-f13ea88a");(0,n.dD)("data-v-f13ea88a");const S={style:{"flex-grow":"1.0"}};(0,n.Cn)();const Q=j(((e,i,t,o,d,r)=>{const a=(0,n.up)("q-btn"),l=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(l,{bordered:"",class:"bg-formcard",flat:"",style:{display:"flex","flex-direction":"row"}},{default:j((()=>[(0,n.Wm)("div",S,[(0,n.Wm)("ul",null,[(0,n.Wm)("li",null,(0,P.zw)(e.identifier.description),1),(0,n.Wm)("li",null,(0,P.zw)(e.identifier.type)+": "+(0,P.zw)(e.identifier.value),1)])]),(0,n.Wm)("div",null,[(0,n.Wm)(a,{class:"identifier-button",color:"blue",icon:"ion-arrow-up",tabindex:"-1",onClick:i[1]||(i[1]=i=>e.$emit("moveUp"))}),(0,n.Wm)(a,{class:"identifier-button",color:"blue",icon:"ion-arrow-down",tabindex:"-1",onClick:i[2]||(i[2]=i=>e.$emit("moveDown"))}),(0,n.Wm)(a,{class:"identifier-button",color:"primary",flat:"","hover-color":"negative",icon:"edit",title:"Edit",onClick:i[3]||(i[3]=i=>e.$emit("editPressed"))})])])),_:1})})),_=(0,n.aZ)({name:"IdentifierCardViewing",props:{index:{type:Number,required:!0},identifier:{type:Object,required:!0}},emits:["editPressed","moveDown","moveUp"]});_.render=Q,_.__scopeId="data-v-f13ea88a";const $=_;Z()(_,"components",{QCard:h.Z,QBtn:V.Z});var E=t(1364),F=t(4009),H=t(2064),T=function(e,i,t,n){function o(e){return e instanceof t?e:new t((function(i){i(e)}))}return new(t||(t=Promise))((function(t,d){function r(e){try{l(n.next(e))}catch(i){d(i)}}function a(e){try{l(n["throw"](e))}catch(i){d(i)}}function l(e){e.done?t(e.value):o(e.value).then(r,a)}l((n=n.apply(e,i||[])).next())}))};const A=(0,n.aZ)({name:"ScreenIdentifiers",components:{Stepper:f.Z,StepperActions:w.Z,IdentifierCardEditing:x,IdentifierCardViewing:$},setup(){const{identifiers:e,setIdentifiers:i}=(0,E.Y)(),t=(0,v.iH)(-1),o=()=>T(this,void 0,void 0,(function*(){const o={type:"doi",value:"",description:""},d=[...e.value,o];i(d),t.value=d.length-1,yield(0,n.Y3)(),(0,F.O)()})),d=()=>{const n=[...e.value];n.splice(t.value,1),i(n),t.value=-1},r=(n,o)=>{const d=Object.assign({},e.value[t.value]);d.description=o,e.value[t.value]=d,i(e.value)},a=(n,o)=>{const d=Object.assign({},e.value[t.value]);d.type=o,e.value[t.value]=d,i(e.value)},l=(n,o)=>{const d=Object.assign({},e.value[t.value]);d.value=o,e.value[t.value]=d,i(e.value)};return{addIdentifier:o,editingId:t,identifiers:e,moveDown:H.v,moveUp:H.A,removeIdentifier:d,setIdentifierDescriptionField:r,setIdentifierTypeField:a,setIdentifierValueField:l,setIdentifiers:i}}});A.render=m,A.__scopeId="data-v-4aa16406";const z=A;Z()(A,"components",{QBtn:V.Z})}}]);