"use strict";(self["webpackChunkcffinit"]=self["webpackChunkcffinit"]||[]).push([[189],{3873:(e,i,n)=>{n.r(i),n.d(i,{default:()=>N});var t=n(3673);const o=(0,t.HX)("data-v-58c06d71");(0,t.dD)("data-v-58c06d71");const d={id:"metroline"},l={id:"form"},r=(0,t.Wm)("div",{id:"form-title"},[(0,t.Wm)("h1",{class:"page-title"}," Identifiers ")],-1),a={id:"form-content"},s=(0,t.Wm)("p",{class:"question"},[(0,t.Uk)(" What persistent identifiers are available for the work? See "),(0,t.Wm)("a",{href:"https://github.com/citation-file-format/citation-file-format/blob/main/schema-guide.md#definitionsidentifier",target:"_blank"}," schema guide "),(0,t.Uk)(" for examples. ")],-1),u={class:"scroll-to-bottom-container"},c=(0,t.Wm)("span",{class:"bottom"},null,-1),p=(0,t.Uk)(" Add identifier "),m={id:"form-button-bar"};(0,t.Cn)();const v=o(((e,i,n,v,f,b)=>{const w=(0,t.up)("Stepper"),g=(0,t.up)("IdentifierCardViewing"),y=(0,t.up)("IdentifierCardEditing"),I=(0,t.up)("q-btn"),W=(0,t.up)("StepperActions");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)("div",d,[(0,t.Wm)(w)]),(0,t.Wm)("div",l,[r,(0,t.Wm)("div",a,[s,(0,t.Wm)("div",u,[c,(0,t.Wm)("div",null,[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(e.identifiers,((n,o)=>((0,t.wg)(),(0,t.j4)("div",{class:"q-mb-md q-mr-lg",key:o},[e.editingId!==o?((0,t.wg)(),(0,t.j4)(g,{key:0,index:o,identifier:n,"num-identifiers":e.identifiers.length,onEditPressed:()=>e.editingId=o,onMoveDown:i=>e.moveIdentifierDown(o),onMoveUp:i=>e.moveIdentifierUp(o)},null,8,["index","identifier","num-identifiers","onEditPressed","onMoveDown","onMoveUp"])):((0,t.wg)(),(0,t.j4)(y,(0,t.dG)({key:1,index:o},n,{"num-identifiers":e.identifiers.length,onUpdateType:e.setIdentifierTypeField,onUpdateValue:e.setIdentifierValueField,onUpdateDescription:e.setIdentifierDescriptionField,onClosePressed:i[1]||(i[1]=()=>e.editingId=-1),onRemovePressed:e.removeIdentifier,onMoveDown:i=>e.moveIdentifierDown(o),onMoveUp:i=>e.moveIdentifierUp(o)}),null,16,["index","num-identifiers","onUpdateType","onUpdateValue","onUpdateDescription","onRemovePressed","onMoveDown","onMoveUp"]))])))),128))])]),(0,t.Wm)(I,{class:"q-mt-md q-mb-md",color:"primary","no-caps":"",onClick:e.addIdentifier},{default:o((()=>[p])),_:1},8,["onClick"])]),(0,t.Wm)("div",m,[(0,t.Wm)(W)])])],64)}));var f=n(1959),b=n(5264),w=n(5132);n(246);const g={class:"row items-center no-wrap"},y={class:"q-gutter-md items-center no-wrap"},I={class:"q-gutter-md items-center no-wrap"};function W(e,i,n,o,d,l){const r=(0,t.up)("q-option-group"),a=(0,t.up)("q-input"),s=(0,t.up)("q-card-section"),u=(0,t.up)("q-btn"),c=(0,t.up)("q-card-actions"),p=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(p,{flat:"",bordered:"",class:"bg-formcard"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)("div",g,[(0,t.Wm)(r,{inline:"",type:"radio","model-value":e.type,options:e.typeOptions,"onUpdate:modelValue":i[1]||(i[1]=i=>e.$emit("updateType","type",i))},null,8,["model-value","options"])]),(0,t.Wm)("div",y,[(0,t.Wm)(a,{"bg-color":"white",label:"Value",outlined:"",standout:"",dense:"","model-value":e.value,"onUpdate:modelValue":i[2]||(i[2]=i=>e.$emit("updateValue","value",i)),rules:[e.validateValue]},null,8,["model-value","rules"])]),(0,t.Wm)("div",I,[(0,t.Wm)(a,{"bg-color":"white",label:"Description",outlined:"",standout:"",dense:"","model-value":e.description,"onUpdate:modelValue":i[3]||(i[3]=i=>e.$emit("updateDescription","description",i)),rules:[e.validateDescription]},null,8,["model-value","rules"])])])),_:1}),(0,t.Wm)(c,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{dense:"",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[4]||(i[4]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,t.Wm)(u,{dense:"",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[5]||(i[5]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,t.Wm)(u,{color:"negative",dense:"",icon:"delete",label:"Remove",onClick:i[6]||(i[6]=i=>e.$emit("removePressed"))}),(0,t.Wm)(u,{dense:"",icon:"done",label:"Done",onClick:i[7]||(i[7]=i=>e.$emit("closePressed"))})])),_:1})])),_:1})}var h=n(3351);const k=(0,t.aZ)({name:"IdentifierCardEditing",props:{index:{type:Number,required:!0},type:{type:String,default:""},value:{type:String,default:""},description:{type:String,default:""},numIdentifiers:{type:Number,default:0}},setup(e){const i={doi:(0,h.rk)("/definitions/identifier/anyOf/0/properties/value"),url:(0,h.rk)("/definitions/identifier/anyOf/1/properties/value"),swh:(0,h.rk)("/definitions/identifier/anyOf/2/properties/value"),other:(0,h.rk)("/definitions/identifier/anyOf/3/properties/value")};return{validateValue:n=>i[e.type](n),validateDescription:(0,h.zN)("/definitions/identifier-description"),typeOptions:[{label:"DOI",value:"doi"},{label:"URL",value:"url"},{label:"Software Heritage",value:"swh"},{label:"Other",value:"other"}]}},emits:["closePressed","removePressed","updateType","updateValue","updateDescription","moveUp","moveDown"]});var C=n(151),D=n(5589),U=n(4140),x=n(4842),q=n(9367),V=n(2165),O=n(7518),Z=n.n(O);k.render=W;const P=k;Z()(k,"components",{QCard:C.Z,QCardSection:D.Z,QOptionGroup:U.Z,QInput:x.Z,QCardActions:q.Z,QBtn:V.Z});var j=n(2323);const S=(0,t.HX)("data-v-21cfe54c");(0,t.dD)("data-v-21cfe54c");const $={style:{"flex-grow":"1.0"}};(0,t.Cn)();const _=S(((e,i,n,o,d,l)=>{const r=(0,t.up)("q-btn"),a=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(a,{bordered:"",class:"bg-formcard",flat:"",style:{display:"flex","flex-direction":"row"}},{default:S((()=>[(0,t.Wm)("div",$,[(0,t.Wm)("ul",null,[(0,t.Wm)("li",null,(0,j.zw)(e.identifier.description),1),(0,t.Wm)("li",null,(0,j.zw)(e.identifier.type)+": "+(0,j.zw)(e.identifier.value),1)])]),(0,t.Wm)("div",null,[(0,t.Wm)(r,{class:"identifier-button",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[1]||(i[1]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,t.Wm)(r,{class:"identifier-button",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[2]||(i[2]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,t.Wm)(r,{class:"identifier-button",color:"primary",flat:"","hover-color":"negative",icon:"edit",title:"Edit",onClick:i[3]||(i[3]=i=>e.$emit("editPressed"))})])])),_:1})})),Q=(0,t.aZ)({name:"IdentifierCardViewing",props:{index:{type:Number,required:!0},identifier:{type:Object,required:!0},numIdentifiers:{type:Number,default:0}},emits:["editPressed","moveDown","moveUp"]});Q.render=_,Q.__scopeId="data-v-21cfe54c";const M=Q;Z()(Q,"components",{QCard:C.Z,QBtn:V.Z});var E=n(1364),F=n(4009),H=n(2064),T=function(e,i,n,t){function o(e){return e instanceof n?e:new n((function(i){i(e)}))}return new(n||(n=Promise))((function(n,d){function l(e){try{a(t.next(e))}catch(i){d(i)}}function r(e){try{a(t["throw"](e))}catch(i){d(i)}}function a(e){e.done?n(e.value):o(e.value).then(l,r)}a((t=t.apply(e,i||[])).next())}))};const A=(0,t.aZ)({name:"ScreenIdentifiers",components:{Stepper:b.Z,StepperActions:w.Z,IdentifierCardEditing:P,IdentifierCardViewing:M},setup(){const{identifiers:e,setIdentifiers:i}=(0,E.Y)(),n=(0,f.iH)(-1),o=()=>T(this,void 0,void 0,(function*(){const o={type:"doi",value:"",description:""},d=[...e.value,o];i(d),n.value=d.length-1,yield(0,t.Y3)(),(0,F.O)()})),d=()=>{const t=[...e.value];t.splice(n.value,1),i(t),n.value=-1},l=(t,o)=>{const d=Object.assign({},e.value[n.value]);d.description=o,e.value[n.value]=d,i(e.value)},r=(t,o)=>{const d=Object.assign({},e.value[n.value]);d.type=o,e.value[n.value]=d,i(e.value)},a=(t,o)=>{const d=Object.assign({},e.value[n.value]);d.value=o,e.value[n.value]=d,i(e.value)},s=t=>{(0,H.A)(t,e.value,i),n.value===t&&t>0?n.value=n.value-1:n.value===t-1&&(n.value=n.value+1)},u=t=>{(0,H.v)(t,e.value,i),n.value===t&&t<e.value.length-1?n.value=n.value+1:n.value===t+1&&(n.value=n.value-1)};return{addIdentifier:o,editingId:n,identifiers:e,moveIdentifierUp:s,moveIdentifierDown:u,removeIdentifier:d,setIdentifierDescriptionField:l,setIdentifierTypeField:r,setIdentifierValueField:a}}});A.render=v,A.__scopeId="data-v-58c06d71";const N=A;Z()(A,"components",{QBtn:V.Z})}}]);